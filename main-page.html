<!doctype html>
<html lang="en">

<head>
  <!-- Metadata and external styles -->
  <meta charset="utf-8" />
  <title>My Contacts - Contact Manager</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="css/main_page.css" />
  <script type="text/javascript" src="js/mainpage.js"></script>
  <script type="text/javascript" src="js/global.js"></script>

  <script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function () {
      onMainpageLoad();
    })
  </script>

</head>

<body>
  <!-- Top bar -->
  <header class="bar">
    <div class="brand">
      <!-- Logo and title -->
      <div class="logo">üìá</div>
      <div class="titles">
        <strong>Contact Manager</strong>
      </div>
    </div>
    <!-- Logout button -->
    <button id="logout-btn" class="btn btn-ghost" onclick="returnToLogin()">Logout</button>
  </header>
  <script>
    function returnToLogin() {
      window.location.href = "login.html";
    }
  </script>

  <!-- Main content card -->
  <main class="card">
    <!-- Tools row for search functionality -->
    <div class="section">
      <!-- Welcome Text -->
      <div>
        <div class="welcome-group">
          <span class="welcome-label" id="welcomeLabel"></span>
        </div>
      </div>
      <div class="row stack-mobile">
        <!-- Search input -->
        <div class="input-group grow">
          <span class="input-label">Search</span>
          <input id="search" placeholder="Search name, email, or phone‚Ä¶">
        </div>
        <!-- Search and Clear buttons -->
        <div class="button-group">
          <button id="search-btn" class="btn" onclick="searchContact()">Search</button>
          <button id="refresh-btn" class="btn btn-ghost" onclick="clearContact()">Clear</button>
        </div>
      </div>
    </div>

    <!-- Add contact section -->
    <div class="section">
      <h2 class="section-title">Add Contact</h2>
      <div class="row stack-mobile">
        <!-- Input fields for Name, Email, and Phone -->
        <div class="input-group grow">
          <span class="input-label">First Name</span>
          <input id="firstname" placeholder="First Name">
        </div>
        <div class="input-group grow">
          <span class="input-label">Last Name</span>
          <input id="lastname" placeholder="Last Name">
        </div>
        <div class="input-group grow">
          <span class="input-label">Email</span>
          <input id="email" placeholder="jane@example.com">
        </div>
        <div class="input-group grow">
          <span class="input-label">Phone</span>
          <input id="phone" placeholder="(555) 000-0000">
        </div>
        <!-- Add button -->
        <button id="add-btn" class="btn btn-primary" onclick="addContact()">Add</button>
      </div>
      <!-- Message area for feedback -->
      <p id="msg" class="msg" aria-live="polite"></p>
    </div>

    <!-- Contacts table -->
    <div class="section">
      <div class="table-wrap">
        <table id="table" class="table">
          <thead>
            <tr>
              <!-- Table headers -->
              <th>Name</th>
              <th>Email</th>
              <th>Phone</th>
              <th style="width:160px">Actions</th>
            </tr>
          </thead>
          <tbody>
            <!-- Table rows will be dynamically populated by app.js -->
          </tbody>
        </table>
        <!-- Empty state message -->
        <div id="empty-state" class="empty hidden">
          <div class="empty-icon">üóíÔ∏è</div>
          <div class="empty-title">No contacts yet</div>
          <div class="empty-desc">Use the form above to add your first contact.</div>
        </div>
      </div>
    </div>
  </main>
  <script>
    // Show or hide the empty state automatically when the table is empty
    const tbody = document.querySelector('#table tbody');
    const empty = document.querySelector('#empty-state');
    const observer = new MutationObserver(() => {
      // Check if the table has rows
      const hasRows = tbody.querySelector('tr') !== null;
      // Toggle the hidden class on the empty state
      empty.classList.toggle('hidden', hasRows);
    });
    // Observe changes to the table body
    observer.observe(tbody, { childList: true });
  </script>
</body>

</html>